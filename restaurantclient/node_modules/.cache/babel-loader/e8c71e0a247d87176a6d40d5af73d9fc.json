{"ast":null,"code":"var _jsxFileName = \"/Users/inonl/Downloads/restaurantclient/src/pages/Cards.js\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport { useParams } from 'react-router-dom';\nimport './Cards.css';\nimport { useCart } from '../cartContext';\nimport { Stack } from '@mui/material';\nimport { useSearchDishes } from '../searchContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Cards(_ref) {\n  _s();\n\n  let {\n    propDishes\n  } = _ref;\n  // propDishes -> cart\n  const {\n    searchDishes,\n    setSearchDishes\n  } = useSearchDishes();\n  const {\n    cart,\n    setCart\n  } = useCart();\n  const [dishes, setDishes] = React.useState(propDishes ? searchDishes ? propDishes.filter(item => item.name.toLowerCase().includes(searchDishes)) : propDishes : undefined);\n  const [dishesCopy, setDishesCopy] = React.useState(propDishes);\n  const {\n    id\n  } = useParams();\n\n  const fetchMenu = () => {\n    fetch(\"http://127.0.0.1:8000/api/dish/\").then(res => res.json()).then(data => {\n      if (data) {\n        if (data.category && data.category[0] === 'Select a valid choice. That choice is not one of the available choices.') {\n          setDishes(null);\n          alert(data.category[0]);\n        } else {\n          if (searchDishes) setDishes(data.filter(item => item.name.toLowerCase().includes(searchDishes)));else {\n            setDishes(data);\n            setDishesCopy(data);\n          }\n        }\n      } else setDishes(null);\n    }).catch(err => {\n      setDishes(null);\n      console.log(err);\n    });\n  };\n\n  React.useEffect(() => {\n    if (searchDishes && searchDishes.length > 0) {\n      setDishes((dishesCopy !== null && dishesCopy !== void 0 ? dishesCopy : dishes).filter(item => item.name.toLowerCase().includes(searchDishes)));\n    } else {\n      setDishes(dishesCopy);\n    }\n\n    return () => {\n      setSearchDishes('');\n    };\n  }, [searchDishes]);\n\n  const filterDishesByCategory = category_id => {\n    fetch(`http://127.0.0.1:8000/api/dish/?category=${category_id}`).then(res => res.json()).then(data => {\n      if (data) {\n        if (data.category && data.category[0] === 'Select a valid choice. That choice is not one of the available choices.') {\n          setDishes(null);\n          alert(data.category[0]);\n        } else {\n          setDishes(data);\n          setDishesCopy(data);\n        }\n      } else setDishes(null);\n    }).catch(err => {\n      setDishes(null);\n      console.log(err);\n    });\n  };\n\n  React.useEffect(() => {\n    if (propDishes) return;\n\n    if (id) {\n      if (id != 'all') filterDishesByCategory(id);else {\n        fetchMenu();\n      }\n    }\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid_cards\",\n    children: dishes === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"An unknown error has occured please try refreshing the page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 32\n    }, this) : dishes ? dishes.map(dish => {\n      return /*#__PURE__*/_jsxDEV(Card, {\n        sx: {\n          maxWidth: 250,\n          mb: 3.5,\n          padding: 2,\n          maxHeight: 420\n        },\n        children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n          component: \"img\",\n          height: \"170px\",\n          width: \"10%\",\n          image: dish.imageUrl,\n          alt: \"No dish pic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h6\",\n            component: \"div\",\n            children: dish.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"$\", dish.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            height: '50px',\n            color: \"text.secondary\",\n            children: dish.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: /*#__PURE__*/_jsxDEV(Stack, {\n            justifyContent: 'center',\n            alignItems: 'center',\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              style: {\n                textTransform: 'none'\n              },\n              onClick: () => {\n                setCart([...cart, dish]);\n              },\n              children: \"Add to cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 14\n            }, this), propDishes && /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              style: {\n                backgroundColor: '#bd3333',\n                color: 'white',\n                textTransform: 'none'\n              },\n              onClick: () => {\n                const filtered = cart.filter(d => d.id != dish.id);\n                setDishes(filtered);\n                setCart(filtered);\n              },\n              children: \"Remove from cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)]\n      }, dish.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this);\n    }) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading category dishes...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 14\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Cards, \"E9cWKe+czgzFcjufQ6Vca3NNWrg=\", false, function () {\n  return [useSearchDishes, useCart, useParams];\n});\n\n_c = Cards;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cards\");","map":{"version":3,"names":["React","Card","CardActions","CardContent","CardMedia","Button","Typography","useParams","useCart","Stack","useSearchDishes","Cards","propDishes","searchDishes","setSearchDishes","cart","setCart","dishes","setDishes","useState","filter","item","name","toLowerCase","includes","undefined","dishesCopy","setDishesCopy","id","fetchMenu","fetch","then","res","json","data","category","alert","catch","err","console","log","useEffect","length","filterDishesByCategory","category_id","map","dish","maxWidth","mb","padding","maxHeight","imageUrl","price","description","textTransform","backgroundColor","color","filtered","d"],"sources":["/Users/inonl/Downloads/restaurantclient/src/pages/Cards.js"],"sourcesContent":["import * as React from 'react';\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport { useParams } from 'react-router-dom';\nimport './Cards.css'\nimport { useCart } from '../cartContext';\nimport { Stack } from '@mui/material';\nimport { useSearchDishes } from '../searchContext';\nexport default function Cards({ propDishes }) { // propDishes -> cart\n  \n  const {searchDishes,setSearchDishes} = useSearchDishes()\n  const {cart,setCart} = useCart()\n  const [dishes,setDishes] = React.useState(propDishes ? (searchDishes ? propDishes.filter(item => item.name.toLowerCase().includes(searchDishes)) : propDishes) : undefined)\n  const [dishesCopy,setDishesCopy] = React.useState(propDishes);\n  const { id } = useParams()\n\n\n  const fetchMenu = () => {\n    fetch(\"http://127.0.0.1:8000/api/dish/\")\n      .then((res) => res.json())\n      .then((data) => {\n        if(data) {\n          if(data.category && data.category[0] === 'Select a valid choice. That choice is not one of the available choices.') {\n              setDishes(null)\n              alert(data.category[0])\n          }else {\n            if(searchDishes)\n\n                setDishes(data.filter(item => item.name.toLowerCase().includes(searchDishes)))  \n              else {\n                setDishes(data)\n                setDishesCopy(data)\n              }\n          } \n       } else\n        setDishes(null) \n      }).catch(err => {\n        setDishes(null)\n        console.log(err)\n    });\n  };\n\n  React.useEffect(() => {\n    if(searchDishes && searchDishes.length > 0) {\n      setDishes((dishesCopy ?? dishes).filter(item => item.name.toLowerCase().includes(searchDishes)))\n    }else {\n      setDishes(dishesCopy)\n    }\n    return () => {\n      setSearchDishes('')\n    }\n  },[searchDishes])\n\n  const filterDishesByCategory = (category_id) => {\n    fetch(`http://127.0.0.1:8000/api/dish/?category=${category_id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if(data) {\n            if(data.category && data.category[0] === 'Select a valid choice. That choice is not one of the available choices.') {\n                setDishes(null)\n                alert(data.category[0])\n            } else {\n              setDishes(data)  \n              setDishesCopy(data)\n          }\n         } else\n          setDishes(null)  \n      }).catch(err => {\n          setDishes(null)\n          console.log(err)\n      });\n  };\n\n  React.useEffect(() => {\n    if(propDishes) return;\n    if(id) {\n      if(id != 'all')\n       filterDishesByCategory(id)\n      else { \n       fetchMenu()\n      }\n    }\n  }, [id])\n\n\n \n\n  return (\n    <div className = 'grid_cards'>\n           {dishes === null ?  <div>An unknown error has occured please try refreshing the page</div> :  dishes ?\n            dishes.map(dish =>{\n            return(\n                <Card key={dish.id}\n                 sx={{ maxWidth: 250, mb: 3.5,padding:2, maxHeight:420 }}>\n            <CardMedia\n              component=\"img\"\n              height=\"170px\"\n              width=\"10%\"\n            \n              image={dish.imageUrl}\n              alt=\"No dish pic\"\n            />\n            <CardContent>\n              <Typography gutterBottom variant=\"h6\" component=\"div\">\n                {dish.name}\n              </Typography>\n              <div>${dish.price}</div>\n              <Typography variant=\"body2\" height={'50px'} color=\"text.secondary\">\n                {dish.description}\n              </Typography>\n            </CardContent>\n            <CardActions>\n             <Stack justifyContent={'center'} alignItems ={'center'}>\n\n         \n             <Button size=\"small\"\n               style ={{textTransform:'none'}}\n               onClick ={() => {\n               setCart([...cart,dish])\n              }}>Add to cart</Button>\n                 {propDishes && <Button size=\"small\" \n                 style ={{backgroundColor:'#bd3333',color:'white',textTransform:'none'}} onClick ={() => {\n                  const filtered = cart.filter(d => d.id != dish.id)\n                  setDishes(filtered)\n                  setCart(filtered)\n              }}>Remove from cart</Button>}\n                  </Stack>\n            </CardActions>\n          </Card>\n            )\n        }) : <div>Loading category dishes...</div>\n    }\n    </div>\n \n    \n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}