{"ast":null,"code":"var _jsxFileName = \"/Users/inonl/Downloads/restaurantclient/src/pages/Cards.js\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport { useParams } from 'react-router-dom';\nimport './Cards.css';\nimport { useCart } from '../cartContext';\nimport { Stack } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Cards(_ref) {\n  _s();\n\n  let {\n    propDishes\n  } = _ref;\n  const {\n    cart,\n    setCart\n  } = useCart();\n  const [dishes, setDishes] = React.useState(propDishes);\n  const {\n    id\n  } = useParams();\n  React.useEffect(() => {\n    // if reached from cart -> check cart state and update\n    if (propDishes && cart && cart.length > 0) setDishes(cart);\n  }, [cart]);\n\n  const fetchMenu = () => {\n    fetch(\"http://127.0.0.1:8000/api/dish/\").then(res => res.json()).then(data => {\n      if (data) {\n        if (data.category && data.category[0] === 'Select a valid choice. That choice is not one of the available choices.') {\n          setDishes(null);\n          alert(data.category[0]);\n        } else setDishes(data);\n      } else setDishes(null);\n    }).catch(err => {\n      setDishes(null);\n      console.log(err);\n    });\n  };\n\n  const filterDishesByCategory = category_id => {\n    fetch(`http://127.0.0.1:8000/api/dish/?category=${category_id}`).then(res => res.json()).then(data => {\n      if (data) {\n        if (data.category && data.category[0] === 'Select a valid choice. That choice is not one of the available choices.') {\n          setDishes(null);\n          alert(data.category[0]);\n        } else setDishes(data);\n      } else setDishes(null);\n    }).catch(err => {\n      setDishes(null);\n      console.log(err);\n    });\n  };\n\n  React.useEffect(() => {\n    if (propDishes) return;\n\n    if (id) {\n      if (id != 'all') filterDishesByCategory(id);else {\n        fetchMenu();\n      }\n    }\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid_cards\",\n    children: dishes === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"An unknown error has occured please try refreshing the page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 32\n    }, this) : dishes ? dishes.map(dish => {\n      return /*#__PURE__*/_jsxDEV(Card, {\n        sx: {\n          maxWidth: 250,\n          mb: 3.5,\n          padding: 2,\n          maxHeight: 420\n        },\n        children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n          component: \"img\",\n          height: \"170px\",\n          width: \"10%\",\n          image: dish.imageUrl,\n          alt: \"green iguana\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            gutterBottom: true,\n            variant: \"h6\",\n            component: \"div\",\n            children: dish.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"$\", dish.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            height: '50px',\n            color: \"text.secondary\",\n            children: dish.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: /*#__PURE__*/_jsxDEV(Stack, {\n            justifyContent: 'center',\n            alignItems: 'center',\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              style: {\n                textTransform: 'none'\n              },\n              onClick: () => {\n                setCart([...cart, dish]);\n              },\n              children: \"Add to cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 14\n            }, this), propDishes && /*#__PURE__*/_jsxDEV(Button, {\n              size: \"small\",\n              style: {\n                backgroundColor: '#bd3333',\n                color: 'white',\n                textTransform: 'none'\n              },\n              onClick: () => {\n                const dishIndex = cart.findIndex(d => d.id === dish.id);\n                let copy = cart;\n\n                if (dishIndex !== -1) {\n                  alert(dishIndex);\n                  copy.slice(dishIndex, 1);\n                  setCart(copy);\n                }\n              },\n              children: \"Remove from cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)]\n      }, dish.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this);\n    }) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading category dishes...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 14\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Cards, \"1a1Aj7F8Qc38+iuyKGX1qnHAC38=\", false, function () {\n  return [useCart, useParams];\n});\n\n_c = Cards;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cards\");","map":{"version":3,"names":["React","Card","CardActions","CardContent","CardMedia","Button","Typography","useParams","useCart","Stack","Cards","propDishes","cart","setCart","dishes","setDishes","useState","id","useEffect","length","fetchMenu","fetch","then","res","json","data","category","alert","catch","err","console","log","filterDishesByCategory","category_id","map","dish","maxWidth","mb","padding","maxHeight","imageUrl","name","price","description","textTransform","backgroundColor","color","dishIndex","findIndex","d","copy","slice"],"sources":["/Users/inonl/Downloads/restaurantclient/src/pages/Cards.js"],"sourcesContent":["import * as React from 'react';\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport CardMedia from '@mui/material/CardMedia';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport { useParams } from 'react-router-dom';\nimport './Cards.css'\nimport { useCart } from '../cartContext';\nimport { Stack } from '@mui/material';\nexport default function Cards({propDishes}) {\n  \n\n  const {cart,setCart} = useCart()\n  const [dishes,setDishes] = React.useState(propDishes)\n  const { id } = useParams()\n\n  React.useEffect(() => {\n    // if reached from cart -> check cart state and update\n    if(propDishes && cart && cart.length > 0)\n      setDishes(cart);\n  },[cart])\n\n  const fetchMenu = () => {\n\n    fetch(\"http://127.0.0.1:8000/api/dish/\")\n      .then((res) => res.json())\n      .then((data) => {\n        if(data) {\n          if(data.category && data.category[0] === 'Select a valid choice. That choice is not one of the available choices.') {\n              setDishes(null)\n              alert(data.category[0])\n          }else\n              setDishes(data)   \n       } else\n        setDishes(null) \n      }).catch(err => {\n        setDishes(null)\n        console.log(err)\n    });\n  };\n\n  const filterDishesByCategory = (category_id) => {\n    fetch(`http://127.0.0.1:8000/api/dish/?category=${category_id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if(data) {\n            if(data.category && data.category[0] === 'Select a valid choice. That choice is not one of the available choices.') {\n                setDishes(null)\n                alert(data.category[0])\n            }else\n                setDishes(data)   \n         } else\n          setDishes(null)  \n      }).catch(err => {\n          setDishes(null)\n          console.log(err)\n      });\n  };\n\n  React.useEffect(() => {\n    if(propDishes) return;\n    if(id) {\n      if(id != 'all')\n       filterDishesByCategory(id)\n      else { \n       fetchMenu()\n      }\n    }\n  }, [id])\n\n\n \n\n  return (\n    <div className = 'grid_cards'>\n           {dishes === null ?  <div>An unknown error has occured please try refreshing the page</div> :  dishes ?\n            dishes.map(dish =>{\n            return(\n                <Card key={dish.id}\n                 sx={{ maxWidth: 250, mb: 3.5,padding:2, maxHeight:420 }}>\n            <CardMedia\n              component=\"img\"\n              height=\"170px\"\n              width=\"10%\"\n              \n              image={dish.imageUrl}\n              alt=\"green iguana\"\n            />\n            <CardContent>\n              <Typography gutterBottom variant=\"h6\" component=\"div\">\n                {dish.name}\n              </Typography>\n              <div>${dish.price}</div>\n              <Typography variant=\"body2\" height={'50px'} color=\"text.secondary\">\n                {dish.description}\n              </Typography>\n            </CardContent>\n            <CardActions>\n             <Stack justifyContent={'center'} alignItems ={'center'}>\n\n         \n             <Button size=\"small\"\n               style ={{textTransform:'none'}}\n               onClick ={() => {\n               setCart([...cart,dish])\n              }}>Add to cart</Button>\n                 {propDishes && <Button size=\"small\" \n                 style ={{backgroundColor:'#bd3333',color:'white',textTransform:'none'}} onClick ={() => {\n                  const dishIndex = cart.findIndex(d => d.id === dish.id);\n                  let copy = cart;\n                  if(dishIndex !== -1) {\n                    alert(dishIndex)\n                      copy.slice(dishIndex,1)\n                      setCart(copy)\n                  }\n              }}>Remove from cart</Button>}\n                  </Stack>\n            </CardActions>\n          </Card>\n            )\n        }) : <div>Loading category dishes...</div>\n    }\n    </div>\n \n    \n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}